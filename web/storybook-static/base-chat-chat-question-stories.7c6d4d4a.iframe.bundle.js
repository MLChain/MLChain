"use strict";(self.webpackChunkmlchain_web=self.webpackChunkmlchain_web||[]).push([[379],{"./app/components/base/chat/chat/question.stories.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{Default:()=>Default,__namedExportsOrder:()=>__namedExportsOrder,default:()=>question_stories});var jsx_runtime=__webpack_require__("./node_modules/next/dist/compiled/react/jsx-runtime.js"),react=__webpack_require__("./node_modules/next/dist/compiled/react/index.js");function CssTransform(cssString){if(0===cssString.length)return{};const style={},propertyValuePairs=cssString.split(";");for(const pair of propertyValuePairs)if(pair.trim().length>0){const[property,value]=pair.split(":");Object.assign(style,{[property.trim()]:value.trim()})}return style}var avatar=__webpack_require__("./app/components/base/icons/src/public/avatar/index.ts"),markdown=__webpack_require__("./app/components/base/markdown.tsx"),file_uploader=__webpack_require__("./app/components/base/file-uploader/index.ts");const Question=({item,questionIcon,theme})=>{const{content,message_files}=item;return(0,jsx_runtime.jsxs)("div",{className:"flex justify-end mb-2 last:mb-0 pl-10",children:[(0,jsx_runtime.jsxs)("div",{className:"group relative mr-4",children:[(0,jsx_runtime.jsxs)("div",{className:"px-4 py-3 bg-[#D1E9FF]/50 rounded-2xl text-sm text-gray-900",style:(null==theme?void 0:theme.chatBubbleColorStyle)?CssTransform(theme.chatBubbleColorStyle):{},children:[!!(null==message_files?void 0:message_files.length)&&(0,jsx_runtime.jsx)(file_uploader.$c,{files:message_files,showDeleteAction:!1,showDownloadAction:!0}),(0,jsx_runtime.jsx)(markdown.oz,{content})]}),(0,jsx_runtime.jsx)("div",{className:"mt-1 h-[18px]"})]}),(0,jsx_runtime.jsx)("div",{className:"shrink-0 w-10 h-10",children:questionIcon||(0,jsx_runtime.jsx)("div",{className:"w-full h-full rounded-full border-[0.5px] border-black/5",children:(0,jsx_runtime.jsx)(avatar.K,{className:"w-full h-full"})})})]})},question=(0,react.memo)(Question);Question.__docgenInfo={description:"",methods:[],displayName:"Question",props:{item:{required:!0,tsType:{name:"intersection",raw:"IChatItem & {\n  isError?: boolean\n  workflowProcess?: WorkflowProcess\n  conversationId?: string\n  allFiles?: FileEntity[]\n}",elements:[{name:"signature",type:"object",raw:"{\n  id: string\n  content: string\n  citation?: CitationItem[]\n  /**\n   * Specific message type\n   */\n  isAnswer: boolean\n  /**\n   * The user feedback result of this message\n   */\n  feedback?: FeedbackType\n  /**\n   * The admin feedback result of this message\n   */\n  adminFeedback?: FeedbackType\n  /**\n   * Whether to hide the feedback area\n   */\n  feedbackDisabled?: boolean\n  /**\n   * More information about this message\n   */\n  more?: MessageMore\n  annotation?: Annotation\n  useCurrentUserAvatar?: boolean\n  isOpeningStatement?: boolean\n  suggestedQuestions?: string[]\n  log?: { role: string; text: string; files?: FileEntity[] }[]\n  agent_thoughts?: ThoughtItem[]\n  message_files?: FileEntity[]\n  workflow_run_id?: string\n  // for agent log\n  conversationId?: string\n  input?: any\n  parentMessageId?: string | null\n  siblingCount?: number\n  siblingIndex?: number\n  prevSibling?: string\n  nextSibling?: string\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"content",value:{name:"string",required:!0}},{key:"citation",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  content: string\n  data_source_type: string\n  dataset_name: string\n  dataset_id: string\n  document_id: string\n  document_name: string\n  hit_count: number\n  index_node_hash: string\n  segment_id: string\n  segment_position: number\n  score: number\n  word_count: number\n}",signature:{properties:[{key:"content",value:{name:"string",required:!0}},{key:"data_source_type",value:{name:"string",required:!0}},{key:"dataset_name",value:{name:"string",required:!0}},{key:"dataset_id",value:{name:"string",required:!0}},{key:"document_id",value:{name:"string",required:!0}},{key:"document_name",value:{name:"string",required:!0}},{key:"hit_count",value:{name:"number",required:!0}},{key:"index_node_hash",value:{name:"string",required:!0}},{key:"segment_id",value:{name:"string",required:!0}},{key:"segment_position",value:{name:"number",required:!0}},{key:"score",value:{name:"number",required:!0}},{key:"word_count",value:{name:"number",required:!0}}]}}],raw:"CitationItem[]",required:!1}},{key:"isAnswer",value:{name:"boolean",required:!0},description:"Specific message type"},{key:"feedback",value:{name:"signature",type:"object",raw:"{\n  rating: MessageRating\n  content?: string | null\n}",signature:{properties:[{key:"rating",value:{name:"MessageRatings[number]",raw:"typeof MessageRatings[number]",required:!0}},{key:"content",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]},required:!1},description:"The user feedback result of this message"},{key:"adminFeedback",value:{name:"signature",type:"object",raw:"{\n  rating: MessageRating\n  content?: string | null\n}",signature:{properties:[{key:"rating",value:{name:"MessageRatings[number]",raw:"typeof MessageRatings[number]",required:!0}},{key:"content",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}}]},required:!1},description:"The admin feedback result of this message"},{key:"feedbackDisabled",value:{name:"boolean",required:!1},description:"Whether to hide the feedback area"},{key:"more",value:{name:"signature",type:"object",raw:"{\n  time: string\n  tokens: number\n  latency: number | string\n}",signature:{properties:[{key:"time",value:{name:"string",required:!0}},{key:"tokens",value:{name:"number",required:!0}},{key:"latency",value:{name:"union",raw:"number | string",elements:[{name:"number"},{name:"string"}],required:!0}}]},required:!1},description:"More information about this message"},{key:"annotation",value:{name:"signature",type:"object",raw:"{\n  id: string\n  authorName: string\n  logAnnotation?: LogAnnotation\n  created_at?: number\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"authorName",value:{name:"string",required:!0}},{key:"logAnnotation",value:{name:"signature",type:"object",raw:"{\n  id: string\n  content: string\n  account: {\n    id: string\n    name: string\n    email: string\n  }\n  created_at: number\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"content",value:{name:"string",required:!0}},{key:"account",value:{name:"signature",type:"object",raw:"{\n  id: string\n  name: string\n  email: string\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"email",value:{name:"string",required:!0}}]},required:!0}},{key:"created_at",value:{name:"number",required:!0}}]},required:!1}},{key:"created_at",value:{name:"number",required:!1}}]},required:!1}},{key:"useCurrentUserAvatar",value:{name:"boolean",required:!1}},{key:"isOpeningStatement",value:{name:"boolean",required:!1}},{key:"suggestedQuestions",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"log",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{ role: string; text: string; files?: FileEntity[] }",signature:{properties:[{key:"role",value:{name:"string",required:!0}},{key:"text",value:{name:"string",required:!0}},{key:"files",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string\n  name: string\n  size: number\n  type: string\n  progress: number\n  transferMethod: TransferMethod\n  supportFileType: string\n  originalFile?: File\n  uploadedId?: string\n  base64Url?: string\n  url?: string\n  isRemote?: boolean\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"size",value:{name:"number",required:!0}},{key:"type",value:{name:"string",required:!0}},{key:"progress",value:{name:"number",required:!0}},{key:"transferMethod",value:{name:"TransferMethod",required:!0}},{key:"supportFileType",value:{name:"string",required:!0}},{key:"originalFile",value:{name:"File",required:!1}},{key:"uploadedId",value:{name:"string",required:!1}},{key:"base64Url",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"isRemote",value:{name:"boolean",required:!1}}]}}],raw:"FileEntity[]",required:!1}}]}}],raw:"{ role: string; text: string; files?: FileEntity[] }[]",required:!1}},{key:"agent_thoughts",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string\n  tool: string // plugin or dataset. May has multi.\n  thought: string\n  tool_input: string\n  tool_labels?: { [key: string]: TypeWithI18N }\n  message_id: string\n  observation: string\n  position: number\n  files?: string[]\n  message_files?: FileEntity[]\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"tool",value:{name:"string",required:!0}},{key:"thought",value:{name:"string",required:!0}},{key:"tool_input",value:{name:"string",required:!0}},{key:"tool_labels",value:{name:"signature",type:"object",raw:"{ [key: string]: TypeWithI18N }",signature:{properties:[{key:{name:"string"},value:{name:"signature",type:"object",raw:"{\n  en_US: T\n  zh_Hans: T\n  [key: string]: T\n}",signature:{properties:[{key:"en_US",value:{name:"T",required:!0}},{key:"zh_Hans",value:{name:"T",required:!0}},{key:{name:"string"},value:{name:"T",required:!0}}]},required:!0}}]},required:!1}},{key:"message_id",value:{name:"string",required:!0}},{key:"observation",value:{name:"string",required:!0}},{key:"position",value:{name:"number",required:!0}},{key:"files",value:{name:"Array",elements:[{name:"string"}],raw:"string[]",required:!1}},{key:"message_files",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string\n  name: string\n  size: number\n  type: string\n  progress: number\n  transferMethod: TransferMethod\n  supportFileType: string\n  originalFile?: File\n  uploadedId?: string\n  base64Url?: string\n  url?: string\n  isRemote?: boolean\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"size",value:{name:"number",required:!0}},{key:"type",value:{name:"string",required:!0}},{key:"progress",value:{name:"number",required:!0}},{key:"transferMethod",value:{name:"TransferMethod",required:!0}},{key:"supportFileType",value:{name:"string",required:!0}},{key:"originalFile",value:{name:"File",required:!1}},{key:"uploadedId",value:{name:"string",required:!1}},{key:"base64Url",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"isRemote",value:{name:"boolean",required:!1}}]}}],raw:"FileEntity[]",required:!1}}]}}],raw:"ThoughtItem[]",required:!1}},{key:"message_files",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string\n  name: string\n  size: number\n  type: string\n  progress: number\n  transferMethod: TransferMethod\n  supportFileType: string\n  originalFile?: File\n  uploadedId?: string\n  base64Url?: string\n  url?: string\n  isRemote?: boolean\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"size",value:{name:"number",required:!0}},{key:"type",value:{name:"string",required:!0}},{key:"progress",value:{name:"number",required:!0}},{key:"transferMethod",value:{name:"TransferMethod",required:!0}},{key:"supportFileType",value:{name:"string",required:!0}},{key:"originalFile",value:{name:"File",required:!1}},{key:"uploadedId",value:{name:"string",required:!1}},{key:"base64Url",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"isRemote",value:{name:"boolean",required:!1}}]}}],raw:"FileEntity[]",required:!1}},{key:"workflow_run_id",value:{name:"string",required:!1}},{key:"conversationId",value:{name:"string",required:!1}},{key:"input",value:{name:"any",required:!1}},{key:"parentMessageId",value:{name:"union",raw:"string | null",elements:[{name:"string"},{name:"null"}],required:!1}},{key:"siblingCount",value:{name:"number",required:!1}},{key:"siblingIndex",value:{name:"number",required:!1}},{key:"prevSibling",value:{name:"string",required:!1}},{key:"nextSibling",value:{name:"string",required:!1}}]}},{name:"signature",type:"object",raw:"{\n  isError?: boolean\n  workflowProcess?: WorkflowProcess\n  conversationId?: string\n  allFiles?: FileEntity[]\n}",signature:{properties:[{key:"isError",value:{name:"boolean",required:!1}},{key:"workflowProcess",value:{name:"signature",type:"object",raw:"{\n  status: WorkflowRunningStatus\n  tracing: NodeTracing[]\n  expand?: boolean // for UI\n  resultText?: string\n  files?: FileEntity[]\n}",signature:{properties:[{key:"status",value:{name:"WorkflowRunningStatus",required:!0}},{key:"tracing",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string\n  index: number\n  predecessor_node_id: string\n  node_id: string\n  node_type: BlockEnum\n  title: string\n  inputs: any\n  process_data: any\n  outputs?: any\n  status: string\n  parallel_run_id?: string\n  error?: string\n  elapsed_time: number\n  execution_metadata: {\n    total_tokens: number\n    total_price: number\n    currency: string\n    iteration_id?: string\n    iteration_index?: number\n    parallel_id?: string\n    parallel_start_node_id?: string\n    parent_parallel_id?: string\n    parent_parallel_start_node_id?: string\n    parallel_mode_run_id?: string\n    iteration_duration_map?: IterationDurationMap\n  }\n  metadata: {\n    iterator_length: number\n    iterator_index: number\n  }\n  created_at: number\n  created_by: {\n    id: string\n    name: string\n    email: string\n  }\n  iterDurationMap?: IterationDurationMap\n  finished_at: number\n  extras?: any\n  expand?: boolean // for UI\n  details?: NodeTracing[][] // iteration detail\n  parallel_id?: string\n  parallel_start_node_id?: string\n  parent_parallel_id?: string\n  parent_parallel_start_node_id?: string\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"index",value:{name:"number",required:!0}},{key:"predecessor_node_id",value:{name:"string",required:!0}},{key:"node_id",value:{name:"string",required:!0}},{key:"node_type",value:{name:"BlockEnum",required:!0}},{key:"title",value:{name:"string",required:!0}},{key:"inputs",value:{name:"any",required:!0}},{key:"process_data",value:{name:"any",required:!0}},{key:"outputs",value:{name:"any",required:!1}},{key:"status",value:{name:"string",required:!0}},{key:"parallel_run_id",value:{name:"string",required:!1}},{key:"error",value:{name:"string",required:!1}},{key:"elapsed_time",value:{name:"number",required:!0}},{key:"execution_metadata",value:{name:"signature",type:"object",raw:"{\n  total_tokens: number\n  total_price: number\n  currency: string\n  iteration_id?: string\n  iteration_index?: number\n  parallel_id?: string\n  parallel_start_node_id?: string\n  parent_parallel_id?: string\n  parent_parallel_start_node_id?: string\n  parallel_mode_run_id?: string\n  iteration_duration_map?: IterationDurationMap\n}",signature:{properties:[{key:"total_tokens",value:{name:"number",required:!0}},{key:"total_price",value:{name:"number",required:!0}},{key:"currency",value:{name:"string",required:!0}},{key:"iteration_id",value:{name:"string",required:!1}},{key:"iteration_index",value:{name:"number",required:!1}},{key:"parallel_id",value:{name:"string",required:!1}},{key:"parallel_start_node_id",value:{name:"string",required:!1}},{key:"parent_parallel_id",value:{name:"string",required:!1}},{key:"parent_parallel_start_node_id",value:{name:"string",required:!1}},{key:"parallel_mode_run_id",value:{name:"string",required:!1}},{key:"iteration_duration_map",value:{name:"Record",elements:[{name:"string"},{name:"number"}],raw:"Record<string, number>",required:!1}}]},required:!0}},{key:"metadata",value:{name:"signature",type:"object",raw:"{\n  iterator_length: number\n  iterator_index: number\n}",signature:{properties:[{key:"iterator_length",value:{name:"number",required:!0}},{key:"iterator_index",value:{name:"number",required:!0}}]},required:!0}},{key:"created_at",value:{name:"number",required:!0}},{key:"created_by",value:{name:"signature",type:"object",raw:"{\n  id: string\n  name: string\n  email: string\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"email",value:{name:"string",required:!0}}]},required:!0}},{key:"iterDurationMap",value:{name:"Record",elements:[{name:"string"},{name:"number"}],raw:"Record<string, number>",required:!1}},{key:"finished_at",value:{name:"number",required:!0}},{key:"extras",value:{name:"any",required:!1}},{key:"expand",value:{name:"boolean",required:!1}},{key:"details",value:{name:"Array",elements:[{name:"Array",elements:[{name:"NodeTracing"}],raw:"NodeTracing[]"}],raw:"NodeTracing[][]",required:!1}},{key:"parallel_id",value:{name:"string",required:!1}},{key:"parallel_start_node_id",value:{name:"string",required:!1}},{key:"parent_parallel_id",value:{name:"string",required:!1}},{key:"parent_parallel_start_node_id",value:{name:"string",required:!1}}]}}],raw:"NodeTracing[]",required:!0}},{key:"expand",value:{name:"boolean",required:!1}},{key:"resultText",value:{name:"string",required:!1}},{key:"files",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string\n  name: string\n  size: number\n  type: string\n  progress: number\n  transferMethod: TransferMethod\n  supportFileType: string\n  originalFile?: File\n  uploadedId?: string\n  base64Url?: string\n  url?: string\n  isRemote?: boolean\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"size",value:{name:"number",required:!0}},{key:"type",value:{name:"string",required:!0}},{key:"progress",value:{name:"number",required:!0}},{key:"transferMethod",value:{name:"TransferMethod",required:!0}},{key:"supportFileType",value:{name:"string",required:!0}},{key:"originalFile",value:{name:"File",required:!1}},{key:"uploadedId",value:{name:"string",required:!1}},{key:"base64Url",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"isRemote",value:{name:"boolean",required:!1}}]}}],raw:"FileEntity[]",required:!1}}]},required:!1}},{key:"conversationId",value:{name:"string",required:!1}},{key:"allFiles",value:{name:"Array",elements:[{name:"signature",type:"object",raw:"{\n  id: string\n  name: string\n  size: number\n  type: string\n  progress: number\n  transferMethod: TransferMethod\n  supportFileType: string\n  originalFile?: File\n  uploadedId?: string\n  base64Url?: string\n  url?: string\n  isRemote?: boolean\n}",signature:{properties:[{key:"id",value:{name:"string",required:!0}},{key:"name",value:{name:"string",required:!0}},{key:"size",value:{name:"number",required:!0}},{key:"type",value:{name:"string",required:!0}},{key:"progress",value:{name:"number",required:!0}},{key:"transferMethod",value:{name:"TransferMethod",required:!0}},{key:"supportFileType",value:{name:"string",required:!0}},{key:"originalFile",value:{name:"File",required:!1}},{key:"uploadedId",value:{name:"string",required:!1}},{key:"base64Url",value:{name:"string",required:!1}},{key:"url",value:{name:"string",required:!1}},{key:"isRemote",value:{name:"boolean",required:!1}}]}}],raw:"FileEntity[]",required:!1}}]}}]},description:""},questionIcon:{required:!1,tsType:{name:"ReactNode"},description:""},theme:{required:!0,tsType:{name:"union",raw:"Theme | null | undefined",elements:[{name:"Theme"},{name:"null"},{name:"undefined"}]},description:""}}};const question_stories={title:"Base/Chat Question",component:question,parameters:{layout:"centered"},tags:["autodocs"],argTypes:{},args:{}},Default={args:{item:{id:"1",isAnswer:!1,content:"You are a helpful assistant."},theme:void 0,questionIcon:(0,jsx_runtime.jsx)("div",{className:"w-full h-full rounded-full border-[0.5px] border-black/5",children:(0,jsx_runtime.jsx)(avatar.K,{className:"w-full h-full"})})}},__namedExportsOrder=["Default"];Default.parameters={...Default.parameters,docs:{...Default.parameters?.docs,source:{originalSource:"{\n  args: {\n    item: {\n      id: '1',\n      isAnswer: false,\n      content: 'You are a helpful assistant.'\n    } satisfies ChatItem,\n    theme: undefined,\n    questionIcon: <div className='w-full h-full rounded-full border-[0.5px] border-black/5'>\n      <User className='w-full h-full' />\n    </div>\n  }\n}",...Default.parameters?.docs?.source}}}}}]);